<!DOCTYPE html>
<html lang="en">

  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>DataLifePR Mint</title>
      <meta name="description" content="">
      <script src="libraries/p5.js"></script>
      <script src="libraries/p5.dom.js"></script>
      <script src="libraries/p5.sound.js"></script>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />
      <link rel="stylesheet" href="styles.css">
      <script src="Brainstem.js"></script>
  </head>

  <body>
    <h1>DataLifePR Mint</h1>
    <div id="MintButton" style="width:300px;height:300px"></div>
    <button onclick="MintNFT()">Mint NFT</button>
    <img src="" id="DataLifePR" height = "1080"/>
    <script>
      console.log('emulating new life');
      catchDATALIFE()
        .then(response => {
            console.log('nice');
        })
        .catch(error => {
          console.log('error!');
          console.error(error);
      });
      async function catchDATALIFE() {
          const response = await fetch('NFT0001B.jpg');
          const blob = await response.blob();
          document.getElementById("DataLifePR").src = URL.createObjectURL(blob);
      }
      fetch('NFT0001B.jpg')
        .then(response => {
          console.log(response);
          return response.blob();
        })
        .then(blob => {
          console.log(blob);
          document.getElementById("DataLifePR").src = URL.createObjectURL(blob);
        })
        .catch(error => {
          console.log('error!');
          console.error(error);
        });
      getData();
      async function getData() {
        const response = await fetch('test.csv')
        const data = await response.text();
        const table = data.split('\n').slice(1);
        table.forEach(row => {
          const columns = row.split(',');
          const id = columns[0];
          const sex = columns[1];
          const city = columns[2];
          const confirmed = columns[3];
          const age_group = columns[4];
        console.log(sex, age_group, city, confirmed);
        });
      }
    </script>

  </body>

</html>
